# Let op: het format van de yaml moet exact overeenkomen met het voorbeeld hieronder of in voorbeeld_data.yaml om uiteindelijk goed te werken in de tool.
# sommige opties moeten ook overeen komen met de opties in het specifieke veld in Jira

epic:
  - summary: Dashboard KPIs
    description: > # gebruik > voor een multiline description
      Management Dashboard voor de directie met inzicht in belangrijke KPI's.

        - Doel: 
        - KPI's:
        - Scope:
        - Stakeholders:
        - Planning:
      
    label: KPIs
    role: Business Analist

    stories:
      # Stories voor Business Analist
      - summary: Requirements en Prerequisites
        description: >
          Business Analyse voor het dashboard.
            - Doel: 
            - Scope:
            - Stakeholders:
            - Planning:

          Privacy en Security voor het dashboard.
        role: Business Analist # keuze uit Business Analist, Informatie Analist, Data Engineer, BI-specialist
        story_points: 8
        subtasks:
          - summary: Functionele Requirements opstellen
            description: > 
              Functionele requirements opstellen voor het dashboard.
                - Doel:
                - Scope:
                - Stakeholders:
                - Planning:
          - summary: Privacy en Security
            description: >
              Doorloop stappen in het Privacy en Security proces.
                - Quickscan
                - Privacy Impact Assessment?

      # Stories voor Informatie Analist
      - summary: Informatiemodellen
        description: >
          Requirements:
            - Functioneel Informatiemodel
            - Conceptueel Informatiemodel
            - Logisch Informatiemodel
        role: Informatie Analist
        story_points: 8
        subtasks:
          - summary: Technische Requirements opstellen
            description: >
              Technische Requirements opstellen voor het dashboard.
                - Data:
                - Scope:
                - Stakeholders:
                - Planning:
          - summary: Conceptueel / Vraaggerelateerd Informatiemodel opstellen
            description: >
              Conceptueel Informatiemodel moet bestaan uit de volgende entiteiten:
                - Entiteit 1
                - Entiteit 2
                - Entiteit 3
          - summary: Logisch / Brongerelateerd Informatiemodel opstellen
            description: >
              Logisch Informatiemodel moet bestaan uit de volgende entiteiten:
                - Entiteit 1
                - Entiteit 2
                - Entiteit 3
          - summary: EDA uitvoeren
            description: >
              Exploratory Data Analysis uitvoeren op de volgende databronnen:
                - Databron 1
                - Databron 2
                - Databron 3

      - summary: Testen Dashboard
        description: Doorloop alle stappen in het testproces van een dashboard.
        role: Informatie Analist
        story_points: 8
        subtasks:
          - summary: Testplan opstellen
            description: x
          - summary: Testscenario's opstellen
            description: x
          - summary: Testscenario's uitvoeren
            description: x
          - summary: Testrapport opstellen
            description: x


      # Stories voor Data Engineer
      - summary: Data inladen (t/m brons)
        description: Werk op een nieuwe branch in de repository (vanuit `dev`)!
        role: Data Engineer
        story_points: 8
        subtasks:
          - summary: EDA (verkenning en opzetten structuur)
            description: >
              EDA op databron en manier van inladen bepalen.
              Werk in folder in repository:
                -root
                  -project (bv 'bezettingsdashboard')
                    -bronsysteem (bv 'amis')
                      -1_bronze.py (databricks notebook)
                      -2_silver.py (databricks notebook)
                      -3_gold.py (databricks notebook)

          - summary: Ruwe data inladen/wegschrijven in originele format (landingzone)
            description: >
              Ruwe data inladen in Databricks landingzone vanuit de bron.
          - summary: Valideren schema
            description: >
              Schema van de ruwe data valideren.
          - summary: Type casting
            description: >
              Type casting toepassen op de ruwe data.
          - summary: Indexeren (indien nodig)
          - summary: DQ checks
            description: >
              Data Quality checks toepassen op de ruwe data met behulp van dq-suite van data management.
          - summary: Historisering toepassen (brons)
            description: >
              Inladen package: `%run ../historisering`
              Inladen package: `pip install moss-package`
              Functie aanroepen vanuit 1_bronze `toepassen_historisering()`
              Ingebouwde check voor unieke business keys (indexen) zit in de historiseringsfuncties.
          
      - summary: Data opschonen en verwerken (zilver)
        description: >
          Ruwe data opschonen.
        role: Data Engineer
        story_points: 4
        subtasks:
          - summary: Dimensietabellen maken (indien nodig)
            description: Indien het bronsysteem geen dimensietabellen heeft, moeten deze gemaakt worden.
          - summary: Historisering toepassen (indien nodig)
          - summary: Aliasing
          - summary: Toepassing business logica
            description: Aanmaken van nieuwe kolommen met business logica.
          # - summary: Primary/Foreign Keys koppelen
          - summary: Data opschonen
            description: >
              - trimmen (bv postcode)
              - missing values
              - spaties
              - etc.
          - summary: Structureren tabellen
            description: >
              - sorteren rijen
              - sorteren kolommen
          - summary: Partitioneren (optioneel)

      - summary: Data verrijken (goud)
        description: Toepassen datamodel + joinen + aggregaties + etc.
        role: Data Engineer
        story_points: 4
        subtasks:
          - summary: Datamodel toepassen
            description: >
              - dimensietabellen koppelen
              - feitentabellen koppelen
          - summary: Business aggregaties
            description: >
              - filteren / slicen
              - aliasing

      - summary: Pipeline naar dev
        description: Pull Request naar dev branch
        role: Data Engineer
        story_points: 2
      
      - summary: Pipeline naar prod
        description: CICD / Asset Bundle naar production workspace
        role: Data Engineer
        story_points: 2


      # Stories voor BI-specialist
      - summary: Dashboard
        description: >
          Dashboard opzetten in Power BI / Tableau
        role: BI-specialist
        story_points: 8
        subtasks:
          - summary: Dashboard opzetten
            description: >
              Dashboard opzetten in Power BI / Tableau
          - summary: Dashboard testen
            description: >
              Dashboard testen in Power BI / Tableau
          - summary: Dashboard opleveren
            description: >
              Dashboard opleveren in Power BI / Tableau
          